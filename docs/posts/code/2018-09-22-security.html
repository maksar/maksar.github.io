<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shestakov Alex Blog - Некоторые аспекты безопасности в разработке ПО</title>
  <link rel="stylesheet" href="../../css/default.css" />

  <script type="text/javascript" src="../../vendor/jquery/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="../../vendor/fresco/js/fresco.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../../vendor/fresco/css/fresco.css" />

  <link rel="stylesheet" href="../../vendor/highlight/styles/atom-one-dark.min.css">
  <script src="../../vendor/highlight/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
</head>

<body>
  <header>
    <div class="logo">
      <a href="../../">Shestakov Alex</a>
    </div>
    <nav>
      &amp;<a href="../../languages/english.html">english</a> &amp;<a href="../../languages/russian.html">russian</a>
      @<a href="../../categories/WAT.html">WAT</a> @<a href="../../categories/code.html">code</a> @<a href="../../categories/projects.html">projects</a>
      <a href="../../about.html">About</a>
    </nav>
  </header>

  <main role="main">
    <h1>Некоторые аспекты безопасности в разработке ПО</h1>
    <article>
  <span class="header">
    September 22, 2018 &amp;<a href="../../languages/russian.html">russian</a> @<a href="../../categories/code.html">code</a> #<a href="../../tags/code-review.html">code-review</a>
  </span>
  <section>
    <p>Защита программного обеспечения от уязвимостей – важный аспект для IT-индустрии. При проектировании систем или написании программного кода случаются ошибки, которые потенциально могут стать причиной брешей в безопасности. Они приводят к возможным утечкам строго конфиденциальной информации, потере доверия к программному продукту и финансовым убыткам. Для предотвращения подобных случаев в IT-отрасли регулярно появляются новые инструменты аудита, давно существуют и отлично описаны методики “безопасного” программирования. Казалось бы, следуй правилам и избежишь проблем, однако в процессе разработки ПО всегда существует пресловутый человеческий фактор.</p>
<!--more-->
<p><img src="../../images/security/logo.jpg" class="center full" /></p>
<p>Чем чревато игнорирование принципов безопасности при написании кода и какими материалами нужно пользоваться, чтобы снизить вероятность возникновения “косяков”? От проблем с безопасностью никуда не уйти. Регулярно обнаруживается, что на некоторых проектах разработчики вставляют в код или конфигурационные файлы пароли, токены, email-ы и другую секретную информацию.</p>
<h2 id="чем-это-чревато">Чем это чревато?</h2>
<p>Основополагающий принцип обеспечения безопасности – злоумышленник знает о вашей системе столько же, сколько и вы. Не стоит считать, что к программному коду имеют доступ только разработчики. Во-первых, он где-то “хостится”, к нему имеют доступ администраторы source control системы. Во-вторых – он может запросто “утечь”: быть специально украден либо просто по неосторожности. Если это случится – злоумышленникам станет известно не только то, как работает приложение, но и с какими сервисами. И они смогут воспользоваться этой информацией: организовать списания с банковских карт, встроить bitcoin майнер к вам на сайт или воспользоваться вычислительными мощностями вашей инфраструктуры. Проблема не ограничена только лишь кодом – есть еще конфигурационные файлы, документация, примеры скриптов (привет, GitLab-у). Многие не видят опасности в том, что в репозитории исходных кодов помещен отдельный файл с конфигурацией, где используются те же ключи, логины и пароли с доступом к production-окружению или пусть даже к staging-окружению. Думать, что если они не в коде, то проблемы нет – не стоит.</p>
<h2 id="но-катастрофы-это-то-что-случается-не-с-нами">Но катастрофы это – то, что случается не с нами…</h2>
<p>И у нас в компании зарегистрировано несколько случаев, когда по счастливой неслучайности значимый кусок проекта попадал в публично доступные места (начиная с “расшареной” папки, заканчивая GitHub-ов и даже StackOverflow-ом). Ботам и автоматическим системам не составило труда быстро найти зашитые ключи и воспользоваться ими в своих целях, подставив нашего заказчика на много тысяч долларов. Урок был усвоен и пришло понимание – предотвратить проще, чем чинить. Как компания мы хотим видеть и контролировать то, насколько аккуратно и осознанно разработчики используют конфиденциальные данные. Инфраструктурные ключи, пароли и другая конфиденциальная информация часто принадлежит не нам, а заказчикам. Мы несем перед ним ответственность за сохранность такой информации.</p>
<h2 id="а-у-нас-паролей-в-коде-нет-они-все-на-проектной-виртуалке">А у нас паролей в коде нет, они все на проектной виртуалке</h2>
<p>Точно, а пароль на виртуалку “стандартный”, чтобы всем “удобно” было. Доходит до смешного, пишем письма “Коллеги, уберите, пожалуйста, пароли из кода, настройте VM более безопасным способом”. В ответ лишь удивление “а что такого-то” и непонимание “так а где хранить тогда?”. Иногда приходится побыть “плохим парнем” и воспользоваться найденной информацией. Пара скриншотов production базы данных или shell-а от боевого окружения часто помогают немного больше письменных увещеваний. Вспоминайте пословицу про цепь и ее слабые звенья, не полагайтесь на security by obscurity.</p>
<h2 id="дайте-доступ-ко-всему-у-меня-проектная-необходимость">Дайте доступ ко всему, у меня проектная необходимость</h2>
<p>Пожалуйста, помните о принципе минимальной доступности. Если определенный доступ при необходимости выдается, то он должен содержать только необходимый набор разрешений. Это – основополагающий принцип обеспечения безопасности IT-систем. Именно поэтому операторы HelpDesk просят ответить на вопросы вида “к какой именно VM необходим доступ?” или “на какой срок необходим доступ?”.</p>
<h2 id="насколько-все-печально">Насколько все печально?</h2>
<p>Проблема с “паролями в репозитории” оказалась достаточно распространена для того, чтобы был разработан инструмент для обнаружения хардкодов в нашем или стороннем Bitbucket репозитории, GitHub репозитории или даже на локальном диске. Все технические координаторы без труда могут воспользоваться сканером.</p>
<h2 id="как-работает-этот-инструмент">Как работает этот инструмент?</h2>
<p>Эта штука сопоставляет энтропию строк и разные ключевые слова. В случае, если в одной строчке кода существует подстрока с большой энтропией (перемежаются символы разного регистра, спец. символы, цифры) и рядом есть ключевые слова (вида AWS, token, password), то велика вероятность, что строке есть “хардкод”. Результатом проверки является письмо техническому координатору с полным списком найденных проблем и просьбой отреагировать.</p>
<h2 id="один-раз-проверили-и-все">Один раз проверили и все?</h2>
<p>В планах – разработка графического интерфейса с возможностью обработки “исключений” и ложных срабатываний. Система в постоянном режиме будет следить за тем, чтобы в коде наших проектов не встречались такого рода проблемы. Если вам известно, что в вашем ПО какие-то ключи можно найти в открытом виде в репозитории, пожалуйста, сообщите своему техлиду, техническому координатору, менеджеру или мне. Обязательно найдется более безопасный способ хранения чувствительной информации.</p>
<h2 id="так-а-как-правильно-то">Так а как правильно-то?</h2>
<p>Стоит руководствоваться документами, размещенными у нас на Confluence: Secure coding guidelines, Secure Software Development Life Cycle, рекомендациями <a href="https://owasp.org">OWASP</a>, манифестом <a href="https://12factor.net">12 Factor App</a> и другими материалами. Если следовать им, то вероятность пострадать от уязвимостей уменьшается. При возникновении вопросов – обращайтесь к техническому координатору проекта.</p>
  </section>
</article>

  </main>

  <footer>
    <a type="application/rss+xml" href="../../rss.xml">RSS Feed</a>
    Site generated by
    <a href="http://jaspervdj.be/hakyll">Hakyll</a>
  </footer>
</body>

</html>